<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¢×¨×›×ª × ×™×”×•×œ ×¤× ×“×” | Panda Admin</title>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="config.js"></script>
    <style>
        :root {
            --bg: #0f172a; --panel: #1e293b; --border: #334155; --text: #e2e8f0;
            --accent: #3b82f6; --success: #10b981; --danger: #ef4444;
        }

        body { background: var(--bg); color: var(--text); font-family: 'Heebo', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding-bottom: 100px; }
        
        /* Login */
        #login { position: fixed; inset: 0; background: #020617; display: flex; justify-content: center; align-items: center; flex-direction: column; z-index: 999; }
        .login-box { text-align: center; background: var(--panel); padding: 40px; border-radius: 20px; border: 1px solid var(--border); box-shadow: 0 20px 50px rgba(0,0,0,0.5); max-width: 400px; width: 90%; }
        
        /* Inputs */
        input, textarea { background: #0f172a; border: 1px solid var(--border); color: white; padding: 10px; width: 100%; margin-top: 5px; border-radius: 6px; font-family: sans-serif; box-sizing: border-box; }
        input:focus, textarea:focus { border-color: var(--accent); outline: none; }

        /* Layout */
        .container { width: 100%; max-width: 1000px; padding: 20px; display: none; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 1px solid var(--border); padding-bottom: 20px; }
        
        /* Tabs */
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; overflow-x: auto; padding-bottom: 5px; }
        .tab-btn { background: var(--panel); color: #94a3b8; border: 1px solid var(--border); padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; white-space: nowrap; }
        .tab-btn.active { background: var(--accent); color: white; border-color: var(--accent); }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }

        .group { background: var(--panel); padding: 25px; border-radius: 12px; margin-bottom: 20px; border: 1px solid var(--border); }
        .group h3 { margin-top: 0; color: var(--accent); border-bottom: 1px solid var(--border); padding-bottom: 10px; }
        label { color: #94a3b8; font-size: 13px; font-weight: bold; display: block; margin-top: 15px; }

        /* Buttons */
        .btn { padding: 10px 20px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-primary { background: var(--accent); color: white; }
        .btn-success { background: var(--success); color: white; }
        .btn-danger { background: var(--danger); color: white; }
        .btn:hover { transform: translateY(-2px); opacity: 0.9; }

        /* Service Editor Cards */
        .service-card { background: #0f172a; padding: 15px; border-radius: 8px; border: 1px solid var(--border); margin-bottom: 15px; display: grid; grid-template-columns: 50px 1fr 1fr; gap: 15px; align-items: start; position: relative; }
        .service-card .full-width { grid-column: span 3; }
        .service-header { grid-column: span 3; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #334155; padding-bottom: 10px; margin-bottom: 10px; font-weight: bold; color: var(--accent); }
        .del-srv-btn { position: absolute; top: 10px; left: 10px; background: #ef4444; color: white; border: none; border-radius: 4px; padding: 5px 10px; cursor: pointer; font-size: 12px; }

        /* Save Bar */
        .save-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: var(--panel); padding: 15px; border-top: 1px solid var(--border); display: flex; justify-content: center; box-shadow: 0 -10px 30px rgba(0,0,0,0.5); z-index: 100; }
        .save-btn { background: var(--success); color: white; font-size: 18px; padding: 12px 40px; width: 100%; max-width: 300px; }

        /* Upload Button styling */
        .file-upload-btn { background: #475569; margin-top: 20px; width: 100%; color: white; padding: 10px; border-radius: 8px; cursor: pointer; display: block; }
        .hidden-file { display: none; }

        @media (max-width: 700px) {
            .service-card { grid-template-columns: 1fr; }
            .service-card .full-width { grid-column: span 1; }
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="login">
        <div class="login-box">
            <div style="font-size: 50px;">ğŸ¼</div>
            <h2>×‘×“×™×§×ª ××‘×˜×—×”</h2>
            
            <input type="password" id="pass" placeholder="×”×›× ×¡ ×¡×™×¡××”" style="text-align: center;">
            <button class="btn btn-primary" style="width:100%; margin-top:15px;" onclick="auth()">×›× ×™×¡×” ×œ××¢×¨×›×ª</button>
            
            <hr style="border-color: #334155; margin: 20px 0;">
            <p style="font-size:13px; color:#94a3b8; margin-bottom:10px;">×”× ×ª×•× ×™× ×œ× ×”×•×¤×™×¢×•? ×˜×¢×Ÿ ××ª ×”×§×•×‘×¥ ×™×“× ×™×ª:</p>
            <label for="fileInput" class="file-upload-btn">ğŸ“‚ ×˜×¢×Ÿ ×§×•×‘×¥ config.js</label>
            <input type="file" id="fileInput" class="hidden-file" accept=".js" onchange="handleFileUpload(this)">
        </div>
    </div>

    <div class="container" id="ui">
        <header>
            <h1>ğŸ¼ ×”×’×“×¨×•×ª ×¤× ×“×”</h1>
            <button class="btn" style="background:#334155; font-size:12px;" onclick="location.reload()">×™×¦×™××” / ×¨×¢× ×•×Ÿ</button>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('contact')">ğŸ“ ×¤×¨×˜×™ ×§×©×¨</button>
            <button class="tab-btn" onclick="switchTab('terminal')">ğŸ’» ×˜×¨××™× ×œ</button>
            <button class="tab-btn" onclick="switchTab('marketing_he')">ğŸ‡®ğŸ‡± ×©×™×•×•×§ (×¢×‘×¨×™×ª)</button>
            <button class="tab-btn" onclick="switchTab('marketing_en')">ğŸ‡ºğŸ‡¸ ×©×™×•×•×§ (×× ×’×œ×™×ª)</button>
            <button class="tab-btn" onclick="switchTab('marketing_es')">ğŸ‡ªğŸ‡¸ ×©×™×•×•×§ (×¡×¤×¨×“×™×ª)</button>
        </div>

        <div id="contact" class="tab-content active">
            <div class="group">
                <h3>×¤×¨×˜×™ ×§×©×¨ ×’×œ×•×‘×œ×™×™×</h3>
                <label>×˜×œ×¤×•×Ÿ (×¤×•×¨××˜ ×‘×™× ×œ××•××™ ×œ×œ× +)</label><input id="c_phone" dir="ltr">
                <label>×•×•××˜×¡××¤</label><input id="c_wa" dir="ltr">
                <label>××™××™×™×œ</label><input id="c_email" dir="ltr">
                <label>×’×™×˜×”××‘</label><input id="c_git" dir="ltr">
            </div>
        </div>

        <div id="terminal" class="tab-content">
            <div class="group">
                <h3>×¤×¨×•×¤×™×œ</h3>
                <label>User</label><input id="t_user" dir="ltr">
                <label>Bio (HTML)</label><textarea id="t_bio" rows="3" dir="ltr"></textarea>
                <label>Skills</label><textarea id="t_skills" rows="4" dir="ltr"></textarea>
            </div>
            <div class="group">
                <h3>âš¡ ×¤×§×•×“×•×ª ××•×ª×××•×ª</h3>
                <div id="cmd_list"></div>
                <button class="btn btn-primary" onclick="addCmd()">+ ×”×•×¡×£ ×¤×§×•×“×”</button>
            </div>
        </div>

        <div id="marketing_he" class="tab-content">
            <div class="group">
                <h3>×›×œ×œ×™ (×¢×‘×¨×™×ª)</h3>
                <label>×›×•×ª×¨×ª</label><input id="he_title">
                <label>×‘×™×•</label><textarea id="he_bio" rows="3"></textarea>
            </div>
            <div class="group">
                <h3>ğŸ› ï¸ × ×™×”×•×œ ×©×™×¨×•×ª×™× (×¢×‘×¨×™×ª)</h3>
                <div id="services_he"></div>
                <button class="btn btn-primary" onclick="addService('he')">+ ×”×•×¡×£ ×©×™×¨×•×ª</button>
            </div>
        </div>

        <div id="marketing_en" class="tab-content">
            <div class="group">
                <h3>General (English)</h3>
                <label>Title</label><input id="en_title" dir="ltr">
                <label>Bio</label><textarea id="en_bio" rows="3" dir="ltr"></textarea>
            </div>
            <div class="group">
                <h3>ğŸ› ï¸ Services (English)</h3>
                <div id="services_en"></div>
                <button class="btn btn-primary" onclick="addService('en')">+ Add Service</button>
            </div>
        </div>

        <div id="marketing_es" class="tab-content">
            <div class="group">
                <h3>General (EspaÃ±ol)</h3>
                <label>TÃ­tulo</label><input id="es_title" dir="ltr">
                <label>Bio</label><textarea id="es_bio" rows="3" dir="ltr"></textarea>
            </div>
            <div class="group">
                <h3>ğŸ› ï¸ Servicios (EspaÃ±ol)</h3>
                <div id="services_es"></div>
                <button class="btn btn-primary" onclick="addService('es')">+ AÃ±adir Servicio</button>
            </div>
        </div>
    </div>

    <div class="save-bar" id="saveBar" style="display:none;">
        <button class="btn save-btn" onclick="save()">ğŸ’¾ ×©××•×¨ ×•×”×•×¨×“ ×§×•×‘×¥ ×¢×“×›×•×Ÿ</button>
    </div>

<script>
    let commands = [];
    let services = { he: [], en: [], es: [] };

    // ×˜×¢×™× ×ª ×§×•×‘×¥ ×™×“× ×™×ª ×× ×”××•×˜×•××˜×™ × ×›×©×œ
    function handleFileUpload(input) {
        const file = input.files[0];
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                // ××¨×™×¥ ××ª ×ª×•×›×Ÿ ×”×§×•×‘×¥ ×›×“×™ ×œ×˜×¢×•×Ÿ ××ª SITE_DATA
                // ×”×¢×¨×”: ×©×™××•×© ×‘-eval ×‘×˜×•×— ×›××Ÿ ×›×™ ×–×” ×›×œ×™ × ×™×”×•×œ ××§×•××™ ×œ×§×•×‘×¥ ×©××ª×” ×™×¦×¨×ª
                const fileContent = e.target.result;
                eval(fileContent); 
                
                if (window.SITE_DATA) {
                    alert("×”×§×•×‘×¥ × ×˜×¢×Ÿ ×‘×”×¦×œ×—×”! ×¢×›×©×™×• ××ª×” ×™×›×•×œ ×œ×”×ª×—×‘×¨.");
                } else {
                    alert("×©×’×™××” ×‘××‘× ×” ×”×§×•×‘×¥.");
                }
            } catch (err) {
                alert("×©×’×™××” ×‘×˜×¢×™× ×ª ×”×§×•×‘×¥: " + err.message);
            }
        };
        reader.readAsText(file);
    }

    function auth() {
        if(document.getElementById('pass').value === 'panda2026') {
            if (!window.SITE_DATA) {
                alert("×œ× × ××¦× ××™×“×¢! ×× × ×˜×¢×Ÿ ××ª ×§×•×‘×¥ config.js ×‘×××¦×¢×•×ª ×”×›×¤×ª×•×¨ ×œ××˜×” ×œ×¤× ×™ ×”×›× ×™×¡×”.");
                return;
            }
            document.getElementById('login').style.display = 'none';
            document.getElementById('ui').style.display = 'block';
            document.getElementById('saveBar').style.display = 'flex';
            loadData();
        } else alert('×¡×™×¡××” ×©×’×•×™×”!');
    }

    function switchTab(id) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.target.classList.add('active');
    }

    function loadData() {
        const d = window.SITE_DATA;
        
        // ×”×’× ×” ××¤× ×™ ×©×“×•×ª ×—×¡×¨×™×
        d.contact = d.contact || {};
        d.terminal = d.terminal || {};
        d.marketing = d.marketing || { he:{services:[]}, en:{services:[]}, es:{services:[]} };

        // Contact
        document.getElementById('c_phone').value = d.contact.phone || '';
        document.getElementById('c_wa').value = d.contact.whatsapp || '';
        document.getElementById('c_email').value = d.contact.email || '';
        document.getElementById('c_git').value = d.contact.github || '';

        // Terminal
        document.getElementById('t_user').value = d.terminal.user || '';
        document.getElementById('t_bio').value = d.terminal.bio || '';
        document.getElementById('t_skills').value = d.terminal.skills || '';
        commands = d.terminal.commands || [];
        renderCmds();

        // Marketing
        ['he', 'en', 'es'].forEach(lang => {
            if(!d.marketing[lang]) d.marketing[lang] = { title:'', bio:'', services:[] };
            document.getElementById(`${lang}_title`).value = d.marketing[lang].title || '';
            document.getElementById(`${lang}_bio`).value = d.marketing[lang].bio || '';
            services[lang] = d.marketing[lang].services || [];
            renderServices(lang);
        });
    }

    // Commands
    function renderCmds() {
        const list = document.getElementById('cmd_list');
        list.innerHTML = '';
        commands.forEach((cmd, i) => {
            const div = document.createElement('div');
            div.className = 'cmd-item';
            div.style.cssText = "display:flex; gap:10px; background:#0f172a; padding:10px; margin-bottom:10px; border-radius:5px; align-items:center;";
            div.innerHTML = `
                <div style="flex-grow:1; display:grid; grid-template-columns:1fr 1fr; gap:5px;">
                    <input value="${cmd.trigger}" onchange="updCmd(${i},'trigger',this.value)" dir="ltr">
                    <input value="${cmd.btn}" onchange="updCmd(${i},'btn',this.value)" dir="ltr">
                    <input value="${cmd.output}" onchange="updCmd(${i},'output',this.value)" dir="ltr" style="grid-column:span 2">
                    <input value="${cmd.url}" onchange="updCmd(${i},'url',this.value)" dir="ltr" style="grid-column:span 2">
                </div>
                <button class="btn btn-danger" onclick="delCmd(${i})">X</button>
            `;
            list.appendChild(div);
        });
    }
    function addCmd() { commands.push({trigger:"new", btn:"LINK", output:"Desc", url:"#"}); renderCmds(); }
    function delCmd(i) { commands.splice(i,1); renderCmds(); }
    function updCmd(i,k,v) { commands[i][k] = v; }

    // Services
    function renderServices(lang) {
        const container = document.getElementById(`services_${lang}`);
        container.innerHTML = '';
        services[lang].forEach((srv, i) => {
            const div = document.createElement('div');
            div.className = 'service-card';
            const featuresStr = Array.isArray(srv.features) ? srv.features.join(', ') : srv.features;
            
            div.innerHTML = `
                <div class="service-header">
                    <span>×©×™×¨×•×ª #${i+1}</span>
                    <button class="del-srv-btn" onclick="delService('${lang}', ${i})">××—×§</button>
                </div>
                <div><label>××™×™×§×•×Ÿ</label><input value="${srv.icon || 'ğŸš€'}" onchange="updSrv('${lang}', ${i}, 'icon', this.value)" style="text-align:center; font-size:20px;"></div>
                <div><label>×›×•×ª×¨×ª</label><input value="${srv.title || ''}" onchange="updSrv('${lang}', ${i}, 'title', this.value)"></div>
                <div class="full-width"><label>×ª×™××•×¨</label><input value="${srv.desc || ''}" onchange="updSrv('${lang}', ${i}, 'desc', this.value)"></div>
                <div class="full-width"><label>×¤×™×¦'×¨×™× (××•×¤×¨×“ ×‘×¤×¡×™×§×™×)</label><textarea rows="2" onchange="updSrvFeatures('${lang}', ${i}, this.value)">${featuresStr}</textarea></div>
                <div><label>×˜×§×¡×˜ ×›×¤×ª×•×¨</label><input value="${srv.btn || ''}" onchange="updSrv('${lang}', ${i}, 'btn', this.value)"></div>
            `;
            container.appendChild(div);
        });
    }
    function addService(lang) { services[lang].push({icon:"ğŸ†•", title:"New Service", desc:"...", features:[], btn:"More"}); renderServices(lang); }
    function delService(lang, i) { if(confirm('×œ××—×•×§?')) { services[lang].splice(i, 1); renderServices(lang); } }
    function updSrv(lang, i, k, v) { services[lang][i][k] = v; }
    function updSrvFeatures(lang, i, v) { services[lang][i].features = v.split(',').map(s=>s.trim()).filter(s=>s); }

    function save() {
        const d = window.SITE_DATA;
        d.contact = { 
            phone: document.getElementById('c_phone').value,
            email: document.getElementById('c_email').value,
            whatsapp: document.getElementById('c_wa').value,
            github: document.getElementById('c_git').value
        };
        d.terminal = {
            user: document.getElementById('t_user').value,
            bio: document.getElementById('t_bio').value,
            skills: document.getElementById('t_skills').value,
            commands: commands
        };
        ['he', 'en', 'es'].forEach(lang => {
            d.marketing[lang].title = document.getElementById(`${lang}_title`).value;
            d.marketing[lang].bio = document.getElementById(`${lang}_bio`).value;
            d.marketing[lang].services = services[lang];
        });

        const blob = new Blob(["window.SITE_DATA = " + JSON.stringify(d, null, 4)], {type: "text/javascript"});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'config.js';
        a.click();
        alert("×”×§×•×‘×¥ × ×©××¨! ×™×© ×œ×”×¢×œ×•×ª ××•×ª×• ×œ-GitHub.");
    }
</script>
</body>
</html>